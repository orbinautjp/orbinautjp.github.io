<!DOCTYPE html>
<html lang="ja">

<head>
  <script src="/scripts/ga.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/styles/orbiterjp.css">
  <script src="/scripts/template.js" charset="utf-8" defer></script>
  <script src="/scripts/horizons.js" charset="utf-8" defer></script>
  <title>JPL Horizonsから軌道をインポートする</title>
</head>

<body>

  <main>

    <h1>JPL Horizonsから軌道をインポートする</h1>


    <p>
      <strong>Horizons Web Application</strong>を利用して、Orbiterに軌道データをインポートする手順について説明します。
    </p>

    <nav>
      <ul>
        <li><a href="#horizons">JPL Horizons</a></li>
        <li><a href="#settings">設定を変更する</a>
          <ol>
            <li><a href="#settings_ephemeris">Ephemeris Type</a></li>
            <li><a href="#settings_target">Target Body</a></li>
            <li><a href="#settings_center">Coordinate Center</a></li>
            <li><a href="#settings_time">Time Specification</a></li>
            <li><a href="#settings_table">Table Settings</a></li>
          </ol>
        </li>
        <li><a href="#output">データを取得する</a></li>
        <li><a href="#scenario">シナリオファイルの作成</a>
          <ul>
            <li><a href="#scenario_maker">シナリオ作成機</a></li>
          </ul>
        </li>
        <li><a href="#example">例題</a>
          <ul>
            <li><a href="#example_iss">ISSの現在位置</a></li>
            <li><a href="#example_voy2">ボイジャー2号の木星フライバイ</a></li>
            <li><a href="#example_hayabusa">はやぶさ2の現在位置</a></li>
          </ul>
        </li>
      </ul>
    </nav>


    <h2 id="horizons">JPL Horizons</h2>


    <p>
      <strong>JPL Horizons</strong>は、惑星・衛星、および探査機などの軌道・位置情報を取得できるサービスです。
    </p>

    <p>
      <a href="https://ssd.jpl.nasa.gov/horizons/app.html#/" target="_blank" rel="noopener noreferrer">Horizons Web
        Application</a>
    </p>


    <h2 id="settings">設定を変更する</h2>


    <p>
      <kbd>Edit</kbd>をクリックして、以下の設定を変更する。
    </p>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/001.png" width="740" height="641">
    </figure>


    <h3 id="settings_ephemeris">Ephemeris Type</h3>


    <p>
      天体暦の種類を選択する。<br>
      <strong>Vector Table</strong>にする。
    </p>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/002.png" width="741" height="240">
    </figure>


    <h3 id="settings_target">Target Body</h3>


    <p>
      目標とする天体・宇宙機の名前を英語で入力する。
    </p>

    <p>
      <strong>Lookup the Specified Body</strong>の下に、名前を入力する。<br>
      入力したら、<kbd>Search</kbd>ボタンをクリック。
    </p>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/003.png" width="630" height="180">
    </figure>


    <h3 id="settings_center">Coordinate Center</h3>


    <p>
      中心天体を示すコードを入力する。<br>
      名前を直接入力しても反映されない。
    </p>

    <p>
      コードを入力したら、<kbd>Search</kbd>をクリック。
    </p>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/004.png" width="400" height="200">
    </figure>

    <table>
      <tr>
        <th>@10<br>@sun</th>
        <td>Sun</td>
        <td>太陽</td>
      </tr>
      <tr>
        <th>@199</th>
        <td>Mercury</td>
        <td>水星</td>
      </tr>
      <tr>
        <th>@299</th>
        <td>Venus</td>
        <td>金星</td>
      </tr>
      <tr>
        <th>@399<br>500</th>
        <td>Earth<br>(Geocentric)</td>
        <td>地球</td>
      </tr>
      <tr>
        <th>@499</th>
        <td>Mars</td>
        <td>火星</td>
      </tr>
      <tr>
        <th>@599</th>
        <td>Jupiter</td>
        <td>木星</td>
      </tr>
      <tr>
        <th>@699</th>
        <td>Saturn</td>
        <td>土星</td>
      </tr>
      <tr>
        <th>@799</th>
        <td>Uranus</td>
        <td>天王星</td>
      </tr>
      <tr>
        <th>@899</th>
        <td>Neptune</td>
        <td>海王星</td>
      </tr>
      <tr>
        <th>@999</th>
        <td>Pluto</td>
        <td>冥王星</td>
      </tr>
    </table>

    <p>
      これら以外の天体など、詳しい情報は以下のリンクを参照。
    </p>

    <p>
      <a href="https://naif.jpl.nasa.gov/pub/naif/toolkit_docs/C/req/naif_ids.html" target="_blank"
        rel="noopener noreferrer">NAIF Integer ID codes</a>
    </p>


    <h3 id="settings_time">Time Specification</h3>


    <p>
      データを取得する期間を設定する。
    </p>

    <p>
      開始日時と終了日時を両方入力する。<br>
      片方だけではエラーになる。
    </p>

    <p>
      年・月・日をハイフンで接続する。<br>
      <strong>2000-01-01</strong>のように入力する。
    </p>

    <p>
      <strong>Step Size</strong>でデータの間隔を設定する。<br>
      <strong>1 days</strong>なら、1日の間隔でデータが出力される。
    </p>

    <p>
      入力したら、<kbd>Use Specified Time Span</kbd>をクリック。
    </p>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/005.png" width="330" height="240">
    </figure>


    <h3 id="settings_table">Table Settings</h3>


    <p>
      出力されるデータの形式を選択する。
    </p>

    <p>
      <kbd>Reset to Defaults</kbd>をクリックすると、デフォルトの設定に戻る。
    </p>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/006.png" width="700" height="600">
    </figure>


    <h4>Select Output Quantities</h4>


    <p>
      <strong>2. State vector {x,y,z,vx,vy,vz}</strong>を選択する。
    </p>


    <h4>Additional Table Settings</h4>


    <p>
      <strong>Output units</strong>が<strong>km and seconds</strong>になっているか確認する。
    </p>

    <p>
      設定したら、<kbd>Use Specified Settings</kbd>をクリック。
    </p>


    <h2 id="output">データを取得する</h2>


    <p>
      以上の設定が終わったら、緑色の<kbd>Generate Ephemeris</kbd>をクリック。
    </p>


    <h2 id="scenario">シナリオファイルの作成</h2>


    <p>
      Horizonsの画面を下にスクロールする。<br>
      <strong>Ephemeris Results</strong>に移動する。
    </p>

    <p>
      <strong>$$SOE</strong>の下の3行をコピーする。<br>
      コピーしたら、このページに戻る。
    </p>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/007.png" width="640" height="320">
    </figure>


    <h3 id="scenario_maker">シナリオ作成機</h3>


    <p>
      中心天体の名前を英語で入力する。<br>
      コピーしたデータを入力欄に貼り付ける。<br>
      作成ボタンをクリック。
    </p>

    <ul class="nostyle">
      <li><label for="centerbody">中心天体 (Coordinate Center, body center)</label></li>
      <li><input type="text" name="centerbody" id="centerbody" required></li>
      <li><label for="filename">ファイル名（オプション）</label></li>
      <li><input type="text" name="filename" id="filename"></li>
      <li><label for="input_horizons">Horizonsのデータ</label></li>
      <li><textarea name="input_horizons" id="input_horizons" spellcheck="false" required></textarea></li>
      <li><button id="button1">作成</button></li>
    </ul>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/008.png" width="650" height="251">
    </figure>

    <p>
      <strong>Scenarios</strong>フォルダを開いて、作成した<strong>.scn</strong>ファイルを貼り付ける。<br>
      <a href="/misc/scenarioedit.html">シナリオファイルの直接編集</a>
    </p>


    <h2 id="example">例題</h2>


    <p>
      以下に入力例を示す。
    </p>

    <p>
      あらかじめ、これらの設定も変更しておくこと。
    </p>

    <table>
      <tr>
        <td><a href="#settings_ephemeris">Ephemeris Type</a></td>
        <td>Vector Table</td>
      </tr>
      <tr>
        <td><a href="#settings_table">Table Settings</a></td>
        <td>
          <ul>
            <li>2. State vector {x,y,z,vx,vy,vz}</li>
            <li>Output units: km and seconds</li>
          </ul>
        </td>
      </tr>
    </table>


    <h3 id="example_iss">ISSの現在位置</h3>


    <p>
      <strong>Target Body</strong>を開く。<br>
      <strong>Lookup the Specified Body</strong>の下に、<strong>ISS</strong>と入力する。<br>
      入力したら、右の<kbd>Search</kbd>ボタンをクリック。
    </p>

    <p>
      <strong>Coordinate Center</strong>を開く。<br>
      <strong>@399</strong>と入力して、<kbd>Search</kbd>をクリック。
    </p>

    <p>
      <strong>Time Specification</strong>を開く。<br>
      <strong>Start time</strong>に今日の日付を入力。<br>
      <strong>Stop time</strong>に明日の日付を入力。<br>
      <kbd>Use Specified Time Span</kbd>をクリック。
    </p>

    <p>
      <kbd>Generate Ephemeris</kbd>をクリック。<br>
      <strong>$$SOE</strong>の下の3行をコピーする。
    </p>

    <p>
      <a href="#scenario_maker">シナリオ作成機</a>で、中心天体に<strong>Earth</strong>と入力する。<br>
      コピーしたデータを下の入力欄に貼り付ける。
    </p>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/009.png" width="500" height="170">
    </figure>


    <h3 id="example_voy2">ボイジャー2号の木星フライバイ</h3>


    <p>
      <strong>Target Body</strong>を開く。<br>
      <strong>Lookup the Specified Body</strong>の下に、<strong>voyager 2</strong>と入力する。<br>
      入力したら、右の<kbd>Search</kbd>ボタンをクリック。
    </p>

    <p>
      <strong>Coordinate Center</strong>を開く。<br>
      <strong>@599</strong>と入力して、<kbd>Search</kbd>をクリック。
    </p>

    <p>
      <strong>Time Specification</strong>を開く。<br>
      <strong>Start time</strong>に<strong>1979-07-09</strong>と入力。<br>
      <strong>Stop time</strong>に<strong>1979-07-10</strong>と入力。<br>
      <kbd>Use Specified Time Span</kbd>をクリック。
    </p>

    <p>
      <kbd>Generate Ephemeris</kbd>をクリック。<br>
      <strong>$$SOE</strong>の下の3行をコピーする。
    </p>

    <p>
      <a href="#scenario_maker">シナリオ作成機</a>で、中心天体に<strong>Jupiter</strong>と入力する。<br>
      コピーしたデータを下の入力欄に貼り付ける。
    </p>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/010.png" width="500" height="170">
    </figure>


    <h3 id="example_hayabusa">はやぶさ2の現在位置</h3>


    <p>
      <strong>Target Body</strong>を開く。<br>
      <strong>Lookup the Specified Body</strong>の下に、<strong>hayabusa 2</strong>と入力する。<br>
      入力したら、右の<kbd>Search</kbd>ボタンをクリック。
    </p>

    <p>
      <strong>Coordinate Center</strong>を開く。<br>
      <strong>@10</strong>と入力して、<kbd>Search</kbd>をクリック。
    </p>

    <p>
      <strong>Time Specification</strong>を開く。<br>
      <strong>Start time</strong>に今日の日付を入力。<br>
      <strong>Stop time</strong>に明日の日付を入力。<br>
      <kbd>Use Specified Time Span</kbd>をクリック。
    </p>

    <p>
      <kbd>Generate Ephemeris</kbd>をクリック。<br>
      <strong>$$SOE</strong>の下の3行をコピーする。
    </p>

    <p>
      <a href="#scenario_maker">シナリオ作成機</a>で、中心天体に<strong>Sun</strong>と入力する。<br>
      コピーしたデータを下の入力欄に貼り付ける。
    </p>

    <figure>
      <img loading="lazy" src="/images/misc/jplhorizons/011.png" width="500" height="170">
    </figure>

  </main>

</body>

</html>